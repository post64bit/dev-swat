!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Matter",[],t):"object"==typeof exports?exports.Matter=t():e.Matter=t()}(this,function(){return i={},o.m=n=[function(e,t){var l={};e.exports=l,function(){l._nextId=0,l._seed=0,l._nowStartTime=+new Date,l._warnedOnce={},l._decomp=null,l.extend=function(e,t){for(var n,i="boolean"==typeof t?(n=2,t):(n=1,!0),o=n;o<arguments.length;o++){var r=arguments[o];if(r)for(var s in r)!i||!r[s]||r[s].constructor!==Object||e[s]&&e[s].constructor!==Object?e[s]=r[s]:(e[s]=e[s]||{},l.extend(e[s],i,r[s]))}return e},l.clone=function(e,t){return l.extend({},t,e)},l.keys=function(e){if(Object.keys)return Object.keys(e);var t,n=[];for(t in e)n.push(t);return n},l.values=function(e){var t,n=[];if(Object.keys){for(var i=Object.keys(e),o=0;o<i.length;o++)n.push(e[i[o]]);return n}for(t in e)n.push(e[t]);return n},l.get=function(e,t,n,i){t=t.split(".").slice(n,i);for(var o=0;o<t.length;o+=1)e=e[t[o]];return e},l.set=function(e,t,n,i,o){o=t.split(".").slice(i,o);return l.get(e,t,0,-1)[o[o.length-1]]=n},l.shuffle=function(e){for(var t=e.length-1;0<t;t--){var n=Math.floor(l.random()*(t+1)),i=e[t];e[t]=e[n],e[n]=i}return e},l.choose=function(e){return e[Math.floor(l.random()*e.length)]},l.isElement=function(e){return"undefined"!=typeof HTMLElement?e instanceof HTMLElement:!!(e&&e.nodeType&&e.nodeName)},l.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},l.isFunction=function(e){return"function"==typeof e},l.isPlainObject=function(e){return"object"==typeof e&&e.constructor===Object},l.isString=function(e){return"[object String]"===toString.call(e)},l.clamp=function(e,t,n){return e<t?t:n<e?n:e},l.sign=function(e){return e<0?-1:1},l.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-l._nowStartTime},l.random=function(e,t){return t=void 0!==t?t:1,(e=void 0!==e?e:0)+n()*(t-e)};var n=function(){return l._seed=(9301*l._seed+49297)%233280,l._seed/233280};l.colorToNumber=function(e){return 3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)},l.logLevel=1,l.log=function(){console&&0<l.logLevel&&l.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},l.info=function(){console&&0<l.logLevel&&l.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},l.warn=function(){console&&0<l.logLevel&&l.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},l.warnOnce=function(){var e=Array.prototype.slice.call(arguments).join(" ");l._warnedOnce[e]||(l.warn(e),l._warnedOnce[e]=!0)},l.deprecated=function(e,t,n){e[t]=l.chain(function(){l.warnOnce("🔅 deprecated 🔅",n)},e[t])},l.nextId=function(){return l._nextId++},l.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},l.map=function(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i+=1)n.push(t(e[i]));return n},l.topologicalSort=function(e){var t,n=[],i=[],o=[];for(t in e)i[t]||o[t]||l._topologicalSort(t,i,o,e,n);return n},l._topologicalSort=function(e,t,n,i,o){var r=i[e]||[];n[e]=!0;for(var s=0;s<r.length;s+=1){var a=r[s];n[a]||t[a]||l._topologicalSort(a,t,n,i,o)}n[e]=!1,t[e]=!0,o.push(e)},l.chain=function(){for(var r=[],e=0;e<arguments.length;e+=1){var t=arguments[e];t._chained?r.push.apply(r,t._chained):r.push(t)}function n(){for(var e,t=new Array(arguments.length),n=0,i=arguments.length;n<i;n++)t[n]=arguments[n];for(n=0;n<r.length;n+=1){var o=r[n].apply(e,t);void 0!==o&&(e=o)}return e}return n._chained=r,n},l.chainPathBefore=function(e,t,n){return l.set(e,t,l.chain(n,l.get(e,t)))},l.chainPathAfter=function(e,t,n){return l.set(e,t,l.chain(l.get(e,t),n))},l.setDecomp=function(e){l._decomp=e},l.getDecomp=function(){var t=l._decomp;try{t||"undefined"==typeof window||(t=window.decomp),t||"undefined"==typeof global||(t=global.decomp)}catch(e){t=null}return t}}()},function(e,t){var n={};(e.exports=n).create=function(e){var t={min:{x:0,y:0},max:{x:0,y:0}};return e&&n.update(t,e),t},n.update=function(e,t,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var i=0;i<t.length;i++){var o=t[i];o.x>e.max.x&&(e.max.x=o.x),o.x<e.min.x&&(e.min.x=o.x),o.y>e.max.y&&(e.max.y=o.y),o.y<e.min.y&&(e.min.y=o.y)}n&&(0<n.x?e.max.x+=n.x:e.min.x+=n.x,0<n.y?e.max.y+=n.y:e.min.y+=n.y)},n.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y},n.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y},n.translate=function(e,t){e.min.x+=t.x,e.max.x+=t.x,e.min.y+=t.y,e.max.y+=t.y},n.shift=function(e,t){var n=e.max.x-e.min.x,i=e.max.y-e.min.y;e.min.x=t.x,e.max.x=t.x+n,e.min.y=t.y,e.max.y=t.y+i}},function(e,t){var n={};(e.exports=n).create=function(e,t){return{x:e||0,y:t||0}},n.clone=function(e){return{x:e.x,y:e.y}},n.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},n.rotate=function(e,t,n){var i=Math.cos(t),o=Math.sin(t);n=n||{};t=e.x*i-e.y*o;return n.y=e.x*o+e.y*i,n.x=t,n},n.rotateAbout=function(e,t,n,i){var o=Math.cos(t),r=Math.sin(t);i=i||{};t=n.x+((e.x-n.x)*o-(e.y-n.y)*r);return i.y=n.y+((e.x-n.x)*r+(e.y-n.y)*o),i.x=t,i},n.normalise=function(e){var t=n.magnitude(e);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}},n.dot=function(e,t){return e.x*t.x+e.y*t.y},n.cross=function(e,t){return e.x*t.y-e.y*t.x},n.cross3=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)},n.add=function(e,t,n){return(n=n||{}).x=e.x+t.x,n.y=e.y+t.y,n},n.sub=function(e,t,n){return(n=n||{}).x=e.x-t.x,n.y=e.y-t.y,n},n.mult=function(e,t){return{x:e.x*t,y:e.y*t}},n.div=function(e,t){return{x:e.x/t,y:e.y/t}},n.perp=function(e,t){return{x:(t=!0===t?-1:1)*-e.y,y:t*e.x}},n.neg=function(e){return{x:-e.x,y:-e.y}},n.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]},function(e,t,n){var s={};e.exports=s;var x=n(2),h=n(0);s.create=function(e,t){for(var n=[],i=0;i<e.length;i++){var o=e[i],o={x:o.x,y:o.y,index:i,body:t,isInternal:!1};n.push(o)}return n},s.fromPath=function(e,t){var i=[];return e.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,function(e,t,n){i.push({x:parseFloat(t),y:parseFloat(n)})}),s.create(i,t)},s.centre=function(e){for(var t,n,i=s.area(e,!0),o={x:0,y:0},r=0;r<e.length;r++)n=(r+1)%e.length,t=x.cross(e[r],e[n]),t=x.mult(x.add(e[r],e[n]),t),o=x.add(o,t);return x.div(o,6*i)},s.mean=function(e){for(var t={x:0,y:0},n=0;n<e.length;n++)t.x+=e[n].x,t.y+=e[n].y;return x.div(t,e.length)},s.area=function(e,t){for(var n=0,i=e.length-1,o=0;o<e.length;o++)n+=(e[i].x-e[o].x)*(e[i].y+e[o].y),i=o;return t?n/2:Math.abs(n)/2},s.inertia=function(e,t){for(var n,i,o=0,r=0,s=e,a=0;a<s.length;a++)i=(a+1)%s.length,o+=(n=Math.abs(x.cross(s[i],s[a])))*(x.dot(s[i],s[i])+x.dot(s[i],s[a])+x.dot(s[a],s[a])),r+=n;return t/6*(o/r)},s.translate=function(e,t,n){var i;if(n)for(i=0;i<e.length;i++)e[i].x+=t.x*n,e[i].y+=t.y*n;else for(i=0;i<e.length;i++)e[i].x+=t.x,e[i].y+=t.y;return e},s.rotate=function(e,t,n){if(0!==t){for(var i=Math.cos(t),o=Math.sin(t),r=0;r<e.length;r++){var s=e[r],a=s.x-n.x,l=s.y-n.y;s.x=n.x+(a*i-l*o),s.y=n.y+(a*o+l*i)}return e}},s.contains=function(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=e[(n+1)%e.length];if(0<(t.x-i.x)*(o.y-i.y)+(t.y-i.y)*(i.x-o.x))return!1}return!0},s.scale=function(e,t,n,i){if(1===t&&1===n)return e;var o;i=i||s.centre(e);for(var r=0;r<e.length;r++)o=e[r],o=x.sub(o,i),e[r].x=i.x+o.x*t,e[r].y=i.y+o.y*n;return e},s.chamfer=function(e,t,n,i,o){t="number"==typeof t?[t]:t||[8],n=void 0!==n?n:-1,i=i||2,o=o||14;for(var r=[],s=0;s<e.length;s++){var a=e[0<=s-1?s-1:e.length-1],l=e[s],c=e[(s+1)%e.length],u=t[s<t.length?s:t.length-1];if(0!==u){var d=x.normalise({x:l.y-a.y,y:a.x-l.x}),p=x.normalise({x:c.y-l.y,y:l.x-c.x}),a=Math.sqrt(2*Math.pow(u,2)),f=x.mult(h.clone(d),u),c=x.normalise(x.mult(x.add(d,p),.5)),v=x.sub(l,x.mult(c,a)),m=n;-1===n&&(m=1.75*Math.pow(u,.32)),(m=h.clamp(m,i,o))%2==1&&(m+=1);for(var y=Math.acos(x.dot(d,p))/m,g=0;g<m;g++)r.push(x.add(x.rotate(f,y*g),v))}else r.push(l)}return r},s.clockwiseSort=function(e){var n=s.mean(e);return e.sort(function(e,t){return x.angle(n,e)-x.angle(n,t)}),e},s.isConvex=function(e){var t,n,i,o,r=0,s=e.length;if(s<3)return null;for(t=0;t<s;t++)if(i=(t+2)%s,o=(e[n=(t+1)%s].x-e[t].x)*(e[i].y-e[n].y),(o-=(e[n].y-e[t].y)*(e[i].x-e[n].x))<0?r|=1:0<o&&(r|=2),3===r)return!1;return 0!==r||null},s.hull=function(e){var t,n,i=[],o=[];for((e=e.slice(0)).sort(function(e,t){var n=e.x-t.x;return 0!=n?n:e.y-t.y}),n=0;n<e.length;n+=1){for(t=e[n];2<=o.length&&x.cross3(o[o.length-2],o[o.length-1],t)<=0;)o.pop();o.push(t)}for(n=e.length-1;0<=n;--n){for(t=e[n];2<=i.length&&x.cross3(i[i.length-2],i[i.length-1],t)<=0;)i.pop();i.push(t)}return i.pop(),o.pop(),i.concat(o)}},function(e,t,n){var i={};e.exports=i;var u=n(0);i.on=function(e,t,n){for(var i,o=t.split(" "),r=0;r<o.length;r++)i=o[r],e.events=e.events||{},e.events[i]=e.events[i]||[],e.events[i].push(n);return n},i.off=function(e,t,n){if(t){"function"==typeof t&&(n=t,t=u.keys(e.events).join(" "));for(var i=t.split(" "),o=0;o<i.length;o++){var r=e.events[i[o]],s=[];if(n&&r)for(var a=0;a<r.length;a++)r[a]!==n&&s.push(r[a]);e.events[i[o]]=s}}else e.events={}},i.trigger=function(e,t,n){var i,o,r,s,a=e.events;if(a&&0<u.keys(a).length){n=n||{},i=t.split(" ");for(var l=0;l<i.length;l++)if(r=a[o=i[l]]){(s=u.clone(n,!1)).name=o,s.source=e;for(var c=0;c<r.length;c++)r[c].apply(e,[s])}}}},function(e,t,n){var d={};e.exports=d;var s=n(4),r=n(0),a=n(1),p=n(6);d.create=function(e){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},e)},d.setModified=function(e,t,n,i){if(e.isModified=t,n&&e.parent&&d.setModified(e.parent,t,n,i),i)for(var o=0;o<e.composites.length;o++){var r=e.composites[o];d.setModified(r,t,n,i)}},d.add=function(e,t){var n=[].concat(t);s.trigger(e,"beforeAdd",{object:t});for(var i=0;i<n.length;i++){var o=n[i];switch(o.type){case"body":if(o.parent!==o){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}d.addBody(e,o);break;case"constraint":d.addConstraint(e,o);break;case"composite":d.addComposite(e,o);break;case"mouseConstraint":d.addConstraint(e,o.constraint)}}return s.trigger(e,"afterAdd",{object:t}),e},d.remove=function(e,t,n){var i=[].concat(t);s.trigger(e,"beforeRemove",{object:t});for(var o=0;o<i.length;o++){var r=i[o];switch(r.type){case"body":d.removeBody(e,r,n);break;case"constraint":d.removeConstraint(e,r,n);break;case"composite":d.removeComposite(e,r,n);break;case"mouseConstraint":d.removeConstraint(e,r.constraint)}}return s.trigger(e,"afterRemove",{object:t}),e},d.addComposite=function(e,t){return e.composites.push(t),t.parent=e,d.setModified(e,!0,!0,!1),e},d.removeComposite=function(e,t,n){var i=r.indexOf(e.composites,t);if(-1!==i&&(d.removeCompositeAt(e,i),d.setModified(e,!0,!0,!1)),n)for(var o=0;o<e.composites.length;o++)d.removeComposite(e.composites[o],t,!0);return e},d.removeCompositeAt=function(e,t){return e.composites.splice(t,1),d.setModified(e,!0,!0,!1),e},d.addBody=function(e,t){return e.bodies.push(t),d.setModified(e,!0,!0,!1),e},d.removeBody=function(e,t,n){var i=r.indexOf(e.bodies,t);if(-1!==i&&(d.removeBodyAt(e,i),d.setModified(e,!0,!0,!1)),n)for(var o=0;o<e.composites.length;o++)d.removeBody(e.composites[o],t,!0);return e},d.removeBodyAt=function(e,t){return e.bodies.splice(t,1),d.setModified(e,!0,!0,!1),e},d.addConstraint=function(e,t){return e.constraints.push(t),d.setModified(e,!0,!0,!1),e},d.removeConstraint=function(e,t,n){var i=r.indexOf(e.constraints,t);if(-1!==i&&d.removeConstraintAt(e,i),n)for(var o=0;o<e.composites.length;o++)d.removeConstraint(e.composites[o],t,!0);return e},d.removeConstraintAt=function(e,t){return e.constraints.splice(t,1),d.setModified(e,!0,!0,!1),e},d.clear=function(e,t,n){if(n)for(var i=0;i<e.composites.length;i++)d.clear(e.composites[i],t,!0);return t?e.bodies=e.bodies.filter(function(e){return e.isStatic}):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,d.setModified(e,!0,!0,!1),e},d.allBodies=function(e){for(var t=[].concat(e.bodies),n=0;n<e.composites.length;n++)t=t.concat(d.allBodies(e.composites[n]));return t},d.allConstraints=function(e){for(var t=[].concat(e.constraints),n=0;n<e.composites.length;n++)t=t.concat(d.allConstraints(e.composites[n]));return t},d.allComposites=function(e){for(var t=[].concat(e.composites),n=0;n<e.composites.length;n++)t=t.concat(d.allComposites(e.composites[n]));return t},d.get=function(e,t,n){var i;switch(n){case"body":i=d.allBodies(e);break;case"constraint":i=d.allConstraints(e);break;case"composite":i=d.allComposites(e).concat(e)}return!i||0===(n=i.filter(function(e){return e.id.toString()===t.toString()})).length?null:n[0]},d.move=function(e,t,n){return d.remove(e,t),d.add(n,t),e},d.rebase=function(e){for(var t=d.allBodies(e).concat(d.allConstraints(e)).concat(d.allComposites(e)),n=0;n<t.length;n++)t[n].id=r.nextId();return d.setModified(e,!0,!0,!1),e},d.translate=function(e,t,n){for(var i=n?d.allBodies(e):e.bodies,o=0;o<i.length;o++)p.translate(i[o],t);return d.setModified(e,!0,!0,!1),e},d.rotate=function(e,t,n,i){for(var o=Math.cos(t),r=Math.sin(t),s=i?d.allBodies(e):e.bodies,a=0;a<s.length;a++){var l=s[a],c=l.position.x-n.x,u=l.position.y-n.y;p.setPosition(l,{x:n.x+(c*o-u*r),y:n.y+(c*r+u*o)}),p.rotate(l,t)}return d.setModified(e,!0,!0,!1),e},d.scale=function(e,t,n,i,o){for(var r=o?d.allBodies(e):e.bodies,s=0;s<r.length;s++){var a=r[s],l=a.position.x-i.x,c=a.position.y-i.y;p.setPosition(a,{x:i.x+l*t,y:i.y+c*n}),p.scale(a,t,n)}return d.setModified(e,!0,!0,!1),e},d.bounds=function(e){for(var t=d.allBodies(e),n=[],i=0;i<t.length;i+=1){var o=t[i];n.push(o.bounds.min,o.bounds.max)}return a.create(n)}},function(e,t,n){var l={};e.exports=l;var c=n(3),u=n(2),o=n(7),r=(n(16),n(0)),d=n(1),p=n(10);!function(){l._inertiaScale=4,l._nextCollidingGroupId=1,l._nextNonCollidingGroupId=-1,l._nextCategory=1,l.create=function(e){var t={id:r.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:c.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},t=r.extend(t,e);return n(t,e),t},l.nextGroup=function(e){return e?l._nextNonCollidingGroupId--:l._nextCollidingGroupId++},l.nextCategory=function(){return l._nextCategory=l._nextCategory<<1,l._nextCategory};var n=function(e,t){t=t||{},l.set(e,{bounds:e.bounds||d.create(e.vertices),positionPrev:e.positionPrev||u.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e}),c.rotate(e.vertices,e.angle,e.position),p.rotate(e.axes,e.angle),d.update(e.bounds,e.vertices,e.velocity),l.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia});var n=e.isStatic?"#14151f":r.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),i=e.isStatic?"#555":"#ccc",t=e.isStatic&&null===e.render.fillStyle?1:0;e.render.fillStyle=e.render.fillStyle||n,e.render.strokeStyle=e.render.strokeStyle||i,e.render.lineWidth=e.render.lineWidth||t,e.render.sprite.xOffset+=-(e.bounds.min.x-e.position.x)/(e.bounds.max.x-e.bounds.min.x),e.render.sprite.yOffset+=-(e.bounds.min.y-e.position.y)/(e.bounds.max.y-e.bounds.min.y)};l.set=function(e,t,n){for(var i in"string"==typeof t&&(i=t,(t={})[i]=n),t)if(Object.prototype.hasOwnProperty.call(t,i))switch(n=t[i],i){case"isStatic":l.setStatic(e,n);break;case"isSleeping":o.set(e,n);break;case"mass":l.setMass(e,n);break;case"density":l.setDensity(e,n);break;case"inertia":l.setInertia(e,n);break;case"vertices":l.setVertices(e,n);break;case"position":l.setPosition(e,n);break;case"angle":l.setAngle(e,n);break;case"velocity":l.setVelocity(e,n);break;case"angularVelocity":l.setAngularVelocity(e,n);break;case"parts":l.setParts(e,n);break;case"centre":l.setCentre(e,n);break;default:e[i]=n}},l.setStatic=function(e,t){for(var n=0;n<e.parts.length;n++){var i=e.parts[n];(i.isStatic=t)?(i._original={restitution:i.restitution,friction:i.friction,mass:i.mass,inertia:i.inertia,density:i.density,inverseMass:i.inverseMass,inverseInertia:i.inverseInertia},i.restitution=0,i.friction=1,i.mass=i.inertia=i.density=1/0,i.inverseMass=i.inverseInertia=0,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.anglePrev=i.angle,i.angularVelocity=0,i.speed=0,i.angularSpeed=0,i.motion=0):i._original&&(i.restitution=i._original.restitution,i.friction=i._original.friction,i.mass=i._original.mass,i.inertia=i._original.inertia,i.density=i._original.density,i.inverseMass=i._original.inverseMass,i.inverseInertia=i._original.inverseInertia,i._original=null)}},l.setMass=function(e,t){var n=e.inertia/(e.mass/6);e.inertia=t/6*n,e.inverseInertia=1/e.inertia,e.mass=t,e.inverseMass=1/e.mass,e.density=e.mass/e.area},l.setDensity=function(e,t){l.setMass(e,t*e.area),e.density=t},l.setInertia=function(e,t){e.inertia=t,e.inverseInertia=1/e.inertia},l.setVertices=function(e,t){t[0].body===e?e.vertices=t:e.vertices=c.create(t,e),e.axes=p.fromVertices(e.vertices),e.area=c.area(e.vertices),l.setMass(e,e.density*e.area);t=c.centre(e.vertices);c.translate(e.vertices,t,-1),l.setInertia(e,l._inertiaScale*c.inertia(e.vertices,e.mass)),c.translate(e.vertices,e.position),d.update(e.bounds,e.vertices,e.velocity)},l.setParts=function(e,t,n){for(t=t.slice(0),e.parts.length=0,e.parts.push(e),e.parent=e,r=0;r<t.length;r++){var i=t[r];i!==e&&(i.parent=e).parts.push(i)}if(1!==e.parts.length){if(n=void 0===n||n){for(var o=[],r=0;r<t.length;r++)o=o.concat(t[r].vertices);c.clockwiseSort(o);var n=c.hull(o),s=c.centre(n);l.setVertices(e,n),c.translate(e.vertices,s)}s=l._totalProperties(e);e.area=s.area,(e.parent=e).position.x=s.centre.x,e.position.y=s.centre.y,e.positionPrev.x=s.centre.x,e.positionPrev.y=s.centre.y,l.setMass(e,s.mass),l.setInertia(e,s.inertia),l.setPosition(e,s.centre)}},l.setCentre=function(e,t,n){n?(e.positionPrev.x+=t.x,e.positionPrev.y+=t.y,e.position.x+=t.x,e.position.y+=t.y):(e.positionPrev.x=t.x-(e.position.x-e.positionPrev.x),e.positionPrev.y=t.y-(e.position.y-e.positionPrev.y),e.position.x=t.x,e.position.y=t.y)},l.setPosition=function(e,t){var n=u.sub(t,e.position);e.positionPrev.x+=n.x,e.positionPrev.y+=n.y;for(var i=0;i<e.parts.length;i++){var o=e.parts[i];o.position.x+=n.x,o.position.y+=n.y,c.translate(o.vertices,n),d.update(o.bounds,o.vertices,e.velocity)}},l.setAngle=function(e,t){var n=t-e.angle;e.anglePrev+=n;for(var i=0;i<e.parts.length;i++){var o=e.parts[i];o.angle+=n,c.rotate(o.vertices,n,e.position),p.rotate(o.axes,n),d.update(o.bounds,o.vertices,e.velocity),0<i&&u.rotateAbout(o.position,n,e.position,o.position)}},l.setVelocity=function(e,t){e.positionPrev.x=e.position.x-t.x,e.positionPrev.y=e.position.y-t.y,e.velocity.x=t.x,e.velocity.y=t.y,e.speed=u.magnitude(e.velocity)},l.setAngularVelocity=function(e,t){e.anglePrev=e.angle-t,e.angularVelocity=t,e.angularSpeed=Math.abs(e.angularVelocity)},l.translate=function(e,t){l.setPosition(e,u.add(e.position,t))},l.rotate=function(e,t,n){var i,o,r,s;n&&(i=Math.cos(t),o=Math.sin(t),r=e.position.x-n.x,s=e.position.y-n.y,l.setPosition(e,{x:n.x+(r*i-s*o),y:n.y+(r*o+s*i)})),l.setAngle(e,e.angle+t)},l.scale=function(e,t,n,i){var o=0,r=0;i=i||e.position;for(var s=0;s<e.parts.length;s++){var a=e.parts[s];c.scale(a.vertices,t,n,i),a.axes=p.fromVertices(a.vertices),a.area=c.area(a.vertices),l.setMass(a,e.density*a.area),c.translate(a.vertices,{x:-a.position.x,y:-a.position.y}),l.setInertia(a,l._inertiaScale*c.inertia(a.vertices,a.mass)),c.translate(a.vertices,{x:a.position.x,y:a.position.y}),0<s&&(o+=a.area,r+=a.inertia),a.position.x=i.x+(a.position.x-i.x)*t,a.position.y=i.y+(a.position.y-i.y)*n,d.update(a.bounds,a.vertices,e.velocity)}1<e.parts.length&&(e.area=o,e.isStatic||(l.setMass(e,e.density*o),l.setInertia(e,r))),e.circleRadius&&(t===n?e.circleRadius*=t:e.circleRadius=null)},l.update=function(e,t,n,i){var o=Math.pow(t*n*e.timeScale,2),r=1-e.frictionAir*n*e.timeScale,t=e.position.x-e.positionPrev.x,n=e.position.y-e.positionPrev.y;e.velocity.x=t*r*i+e.force.x/e.mass*o,e.velocity.y=n*r*i+e.force.y/e.mass*o,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.angularVelocity=(e.angle-e.anglePrev)*r*i+e.torque/e.inertia*o,e.anglePrev=e.angle,e.angle+=e.angularVelocity,e.speed=u.magnitude(e.velocity),e.angularSpeed=Math.abs(e.angularVelocity);for(var s=0;s<e.parts.length;s++){var a=e.parts[s];c.translate(a.vertices,e.velocity),0<s&&(a.position.x+=e.velocity.x,a.position.y+=e.velocity.y),0!==e.angularVelocity&&(c.rotate(a.vertices,e.angularVelocity,e.position),p.rotate(a.axes,e.angularVelocity),0<s&&u.rotateAbout(a.position,e.angularVelocity,e.position,a.position)),d.update(a.bounds,a.vertices,e.velocity)}},l.applyForce=function(e,t,n){e.force.x+=n.x,e.force.y+=n.y;var i=t.x-e.position.x,t=t.y-e.position.y;e.torque+=i*n.y-t*n.x},l._totalProperties=function(e){for(var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=1===e.parts.length?0:1;n<e.parts.length;n++){var i=e.parts[n],o=i.mass!==1/0?i.mass:1;t.mass+=o,t.area+=i.area,t.inertia+=i.inertia,t.centre=u.add(t.centre,u.mult(i.position,o))}return t.centre=u.div(t.centre,t.mass),t}}()},function(e,t,n){var a={};e.exports=a;var i=n(4);a._motionWakeThreshold=.18,a._motionSleepThreshold=.08,a._minBias=.9,a.update=function(e,t){for(var n=t*t*t,i=0;i<e.length;i++){var o,r=e[i],s=r.speed*r.speed+r.angularSpeed*r.angularSpeed;0===r.force.x&&0===r.force.y?(o=Math.min(r.motion,s),s=Math.max(r.motion,s),r.motion=a._minBias*o+(1-a._minBias)*s,0<r.sleepThreshold&&r.motion<a._motionSleepThreshold*n?(r.sleepCounter+=1,r.sleepCounter>=r.sleepThreshold&&a.set(r,!0)):0<r.sleepCounter&&--r.sleepCounter):a.set(r,!1)}},a.afterCollisions=function(e,t){for(var n=t*t*t,i=0;i<e.length;i++){var o,r,s=e[i];s.isActive&&(r=(o=s.collision).bodyA.parent,s=o.bodyB.parent,r.isSleeping&&s.isSleeping||r.isStatic||s.isStatic||(r.isSleeping||s.isSleeping)&&(r=(o=r.isSleeping&&!r.isStatic?r:s)===r?s:r,!o.isStatic&&r.motion>a._motionWakeThreshold*n&&a.set(o,!1)))}},a.set=function(e,t){var n=e.isSleeping;t?(e.isSleeping=!0,e.sleepCounter=e.sleepThreshold,e.positionImpulse.x=0,e.positionImpulse.y=0,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.anglePrev=e.angle,e.speed=0,e.angularSpeed=0,e.motion=0,n||i.trigger(e,"sleepStart")):(e.isSleeping=!1,e.sleepCounter=0,n&&i.trigger(e,"sleepEnd"))}},function(e,t,n){var v={};e.exports=v;var s=n(3),m=n(2),a=n(7),l=n(1),c=n(10),i=n(0);v._warming=.4,v._torqueDampen=1,v._minLength=1e-6,v.create=function(e){var t=e;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var n=t.bodyA?m.add(t.bodyA.position,t.pointA):t.pointA,e=t.bodyB?m.add(t.bodyB.position,t.pointB):t.pointB,e=m.magnitude(m.sub(n,e));t.length=void 0!==t.length?t.length:e,t.id=t.id||i.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(0<t.length?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};e={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===t.length&&.1<t.stiffness?(e.type="pin",e.anchors=!1):t.stiffness<.9&&(e.type="spring"),t.render=i.extend(e,t.render),t},v.preSolveAll=function(e){for(var t=0;t<e.length;t+=1){var n=e[t],i=n.constraintImpulse;n.isStatic||0===i.x&&0===i.y&&0===i.angle||(n.position.x+=i.x,n.position.y+=i.y,n.angle+=i.angle)}},v.solveAll=function(e,t){for(var n=0;n<e.length;n+=1){var i=e[n],o=!i.bodyA||i.bodyA&&i.bodyA.isStatic,r=!i.bodyB||i.bodyB&&i.bodyB.isStatic;(o||r)&&v.solve(e[n],t)}for(n=0;n<e.length;n+=1)o=!(i=e[n]).bodyA||i.bodyA&&i.bodyA.isStatic,r=!i.bodyB||i.bodyB&&i.bodyB.isStatic,o||r||v.solve(e[n],t)},v.solve=function(e,t){var n,i,o,r,s,a,l,c,u=e.bodyA,d=e.bodyB,p=e.pointA,f=e.pointB;(u||d)&&(u&&!u.isStatic&&(m.rotate(p,u.angle-e.angleA,p),e.angleA=u.angle),d&&!d.isStatic&&(m.rotate(f,d.angle-e.angleB,f),e.angleB=d.angle),o=p,r=f,u&&(o=m.add(u.position,p)),d&&(r=m.add(d.position,f)),o&&r&&(n=m.sub(o,r),(i=m.magnitude(n))<v._minLength&&(i=v._minLength),o=(i-e.length)/i,r=e.stiffness<1?e.stiffness*t:e.stiffness,t=m.mult(n,o*r),r=(o=(u?u.inverseMass:0)+(d?d.inverseMass:0))+((u?u.inverseInertia:0)+(d?d.inverseInertia:0)),e.damping&&(c=m.create(),l=m.div(n,i),c=m.sub(d&&m.sub(d.position,d.positionPrev)||c,u&&m.sub(u.position,u.positionPrev)||c),c=m.dot(l,c)),u&&!u.isStatic&&(a=u.inverseMass/o,u.constraintImpulse.x-=t.x*a,u.constraintImpulse.y-=t.y*a,u.position.x-=t.x*a,u.position.y-=t.y*a,e.damping&&(u.positionPrev.x-=e.damping*l.x*c*a,u.positionPrev.y-=e.damping*l.y*c*a),s=m.cross(p,t)/r*v._torqueDampen*u.inverseInertia*(1-e.angularStiffness),u.constraintImpulse.angle-=s,u.angle-=s),d&&!d.isStatic&&(a=d.inverseMass/o,d.constraintImpulse.x+=t.x*a,d.constraintImpulse.y+=t.y*a,d.position.x+=t.x*a,d.position.y+=t.y*a,e.damping&&(d.positionPrev.x+=e.damping*l.x*c*a,d.positionPrev.y+=e.damping*l.y*c*a),s=m.cross(f,t)/r*v._torqueDampen*d.inverseInertia*(1-e.angularStiffness),d.constraintImpulse.angle+=s,d.angle+=s)))},v.postSolveAll=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=n.constraintImpulse;if(!(n.isStatic||0===i.x&&0===i.y&&0===i.angle)){a.set(n,!1);for(var o=0;o<n.parts.length;o++){var r=n.parts[o];s.translate(r.vertices,i),0<o&&(r.position.x+=i.x,r.position.y+=i.y),0!==i.angle&&(s.rotate(r.vertices,i.angle,n.position),c.rotate(r.axes,i.angle),0<o&&m.rotateAbout(r.position,i.angle,n.position,r.position)),l.update(r.bounds,r.vertices,n.velocity)}i.angle*=v._warming,i.x*=v._warming,i.y*=v._warming}}},v.pointAWorld=function(e){return{x:(e.bodyA?e.bodyA.position.x:0)+e.pointA.x,y:(e.bodyA?e.bodyA.position.y:0)+e.pointA.y}},v.pointBWorld=function(e){return{x:(e.bodyB?e.bodyB.position.x:0)+e.pointB.x,y:(e.bodyB?e.bodyB.position.y:0)+e.pointB.y}}},function(e,t,n){var p={};e.exports=p;var f=n(17);p.create=function(e,t){var n=e.bodyA,i=e.bodyB,o=e.parentA,r=e.parentB,r={id:p.id(n,i),bodyA:n,bodyB:i,contacts:{},activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:n.isSensor||i.isSensor,timeCreated:t,timeUpdated:t,inverseMass:o.inverseMass+r.inverseMass,friction:Math.min(o.friction,r.friction),frictionStatic:Math.max(o.frictionStatic,r.frictionStatic),restitution:Math.max(o.restitution,r.restitution),slop:Math.max(o.slop,r.slop)};return p.update(r,e,t),r},p.update=function(e,t,n){var i=e.contacts,o=t.supports,r=e.activeContacts,s=t.parentA,a=t.parentB;if(e.collision=t,e.inverseMass=s.inverseMass+a.inverseMass,e.friction=Math.min(s.friction,a.friction),e.frictionStatic=Math.max(s.frictionStatic,a.frictionStatic),e.restitution=Math.max(s.restitution,a.restitution),e.slop=Math.max(s.slop,a.slop),r.length=0,t.collided){for(var l=0;l<o.length;l++){var c=o[l],u=f.id(c),d=i[u];d?r.push(d):r.push(i[u]=f.create(c))}e.separation=t.depth,p.setActive(e,!0,n)}else!0===e.isActive&&p.setActive(e,!1,n)},p.setActive=function(e,t,n){t?(e.isActive=!0,e.timeUpdated=n):(e.isActive=!1,e.activeContacts.length=0)},p.id=function(e,t){return e.id<t.id?"A"+e.id+"B"+t.id:"A"+t.id+"B"+e.id}},function(e,t,n){var i={};e.exports=i;var o=n(2),r=n(0);i.fromVertices=function(e){for(var t={},n=0;n<e.length;n++){var i=(n+1)%e.length,i=o.normalise({x:e[i].y-e[n].y,y:e[n].x-e[i].x});t[(0===i.y?1/0:i.x/i.y).toFixed(3).toString()]=i}return r.values(t)},i.rotate=function(e,t){if(0!==t)for(var n=Math.cos(t),i=Math.sin(t),o=0;o<e.length;o++){var r=e[o],s=r.x*n-r.y*i;r.y=r.x*i+r.y*n,r.x=s}}},function(e,t,n){var d={};e.exports=d;var C=n(3),B=n(0),_=n(6),k=n(1),I=n(2);d.rectangle=function(e,t,n,i,o){o=o||{};n={label:"Rectangle Body",position:{x:e,y:t},vertices:C.fromPath("L 0 0 L "+n+" 0 L "+n+" "+i+" L 0 "+i)};return o.chamfer&&(i=o.chamfer,n.vertices=C.chamfer(n.vertices,i.radius,i.quality,i.qualityMin,i.qualityMax),delete o.chamfer),_.create(B.extend({},n,o))},d.trapezoid=function(e,t,n,i,o,r){r=r||{};var s=n*(o*=.5),a=s+(1-2*o)*n,n=a+s,n=o<.5?"L 0 0 L "+s+" "+-i+" L "+a+" "+-i+" L "+n+" 0":"L 0 0 L "+a+" "+-i+" L "+n+" 0",t={label:"Trapezoid Body",position:{x:e,y:t},vertices:C.fromPath(n)};return r.chamfer&&(n=r.chamfer,t.vertices=C.chamfer(t.vertices,n.radius,n.quality,n.qualityMin,n.qualityMax),delete r.chamfer),_.create(B.extend({},t,r))},d.circle=function(e,t,n,i,o){i=i||{};var r={label:"Circle Body",circleRadius:n};o=o||25;o=Math.ceil(Math.max(10,Math.min(o,n)));return o%2==1&&(o+=1),d.polygon(e,t,o,n,B.extend({},r,i))},d.polygon=function(e,t,n,i,o){if(o=o||{},n<3)return d.circle(e,t,i,o);for(var r=2*Math.PI/n,s="",a=.5*r,l=0;l<n;l+=1){var c=a+l*r,u=Math.cos(c)*i,c=Math.sin(c)*i;s+="L "+u.toFixed(3)+" "+c.toFixed(3)+" "}e={label:"Polygon Body",position:{x:e,y:t},vertices:C.fromPath(s)};return o.chamfer&&(t=o.chamfer,e.vertices=C.chamfer(e.vertices,t.radius,t.quality,t.qualityMin,t.qualityMax),delete o.chamfer),_.create(B.extend({},e,o))},d.fromVertices=function(e,t,n,i,o,r,s,a){var l,c,u,d,p=B.getDecomp(),f=Boolean(p&&p.quickDecomp);for(i=i||{},l=[],o=void 0!==o&&o,r=void 0!==r?r:.01,s=void 0!==s?s:10,a=void 0!==a?a:.01,B.isArray(n[0])||(n=[n]),u=0;u<n.length;u+=1)if(v=n[u],!(c=C.isConvex(v))&&!f&&B.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),c||!f)v=c?C.clockwiseSort(v):C.hull(v),l.push({position:{x:e,y:t},vertices:v});else{var v=v.map(function(e){return[e.x,e.y]});p.makeCCW(v),!1!==r&&p.removeCollinearPoints(v,r),!1!==a&&p.removeDuplicatePoints&&p.removeDuplicatePoints(v,a);for(var m=p.quickDecomp(v),y=0;y<m.length;y++){var g=m[y].map(function(e){return{x:e[0],y:e[1]}});0<s&&C.area(g)<s||l.push({position:C.centre(g),vertices:g})}}for(y=0;y<l.length;y++)l[y]=_.create(B.extend(l[y],i));if(o)for(y=0;y<l.length;y++)for(var x=l[y],h=y+1;h<l.length;h++){var b=l[h];if(k.overlaps(x.bounds,b.bounds))for(var S=x.vertices,w=b.vertices,A=0;A<x.vertices.length;A++)for(d=0;d<b.vertices.length;d++){var P=I.magnitudeSquared(I.sub(S[(A+1)%S.length],w[d])),M=I.magnitudeSquared(I.sub(S[A],w[(d+1)%w.length]));P<5&&M<5&&(S[A].isInternal=!0,w[d].isInternal=!0)}}return 1<l.length?(o=_.create(B.extend({parts:l.slice(0)},i)),_.setPosition(o,{x:e,y:t}),o):l[0]}},function(e,t,n){var i={};e.exports=i;var o=n(0);i.create=function(e){var n={};return e||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),n.element=e||document.body,n.absolute={x:0,y:0},n.position={x:0,y:0},n.mousedownPosition={x:0,y:0},n.mouseupPosition={x:0,y:0},n.offset={x:0,y:0},n.scale={x:1,y:1},n.wheelDelta=0,n.button=-1,n.pixelRatio=parseInt(n.element.getAttribute("data-pixel-ratio"),10)||1,n.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},n.mousemove=function(e){var t=i._getRelativeMousePosition(e,n.element,n.pixelRatio);e.changedTouches&&(n.button=0,e.preventDefault()),n.absolute.x=t.x,n.absolute.y=t.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.sourceEvents.mousemove=e},n.mousedown=function(e){var t=i._getRelativeMousePosition(e,n.element,n.pixelRatio);e.changedTouches?(n.button=0,e.preventDefault()):n.button=e.button,n.absolute.x=t.x,n.absolute.y=t.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mousedownPosition.x=n.position.x,n.mousedownPosition.y=n.position.y,n.sourceEvents.mousedown=e},n.mouseup=function(e){var t=i._getRelativeMousePosition(e,n.element,n.pixelRatio);e.changedTouches&&e.preventDefault(),n.button=-1,n.absolute.x=t.x,n.absolute.y=t.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mouseupPosition.x=n.position.x,n.mouseupPosition.y=n.position.y,n.sourceEvents.mouseup=e},n.mousewheel=function(e){n.wheelDelta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),e.preventDefault()},i.setElement(n,n.element),n},i.setElement=function(e,t){(e.element=t).addEventListener("mousemove",e.mousemove),t.addEventListener("mousedown",e.mousedown),t.addEventListener("mouseup",e.mouseup),t.addEventListener("mousewheel",e.mousewheel,{passive:!1}),t.addEventListener("DOMMouseScroll",e.mousewheel),t.addEventListener("touchmove",e.mousemove,{passive:!1}),t.addEventListener("touchstart",e.mousedown,{passive:!1}),t.addEventListener("touchend",e.mouseup)},i.clearSourceEvents=function(e){e.sourceEvents.mousemove=null,e.sourceEvents.mousedown=null,e.sourceEvents.mouseup=null,e.sourceEvents.mousewheel=null,e.wheelDelta=0},i.setOffset=function(e,t){e.offset.x=t.x,e.offset.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},i.setScale=function(e,t){e.scale.x=t.x,e.scale.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},i._getRelativeMousePosition=function(e,t,n){var i,o=t.getBoundingClientRect(),r=document.documentElement||document.body.parentNode||document.body,s=void 0!==window.pageXOffset?window.pageXOffset:r.scrollLeft,a=void 0!==window.pageYOffset?window.pageYOffset:r.scrollTop,r=e.changedTouches,a=r?(i=r[0].pageX-o.left-s,r[0].pageY-o.top-a):(i=e.pageX-o.left-s,e.pageY-o.top-a);return{x:i/(t.clientWidth/(t.width||t.clientWidth)*n),y:a/(t.clientHeight/(t.height||t.clientHeight)*n)}}},function(e,t,n){var p={};e.exports=p;var f=n(14),v=n(9),m=n(1);p.collisions=function(e,t){for(var n=[],i=t.pairs.table,o=0;o<e.length;o++){var r=e[o][0],s=e[o][1];if((!r.isStatic&&!r.isSleeping||!s.isStatic&&!s.isSleeping)&&(p.canCollide(r.collisionFilter,s.collisionFilter)&&m.overlaps(r.bounds,s.bounds)))for(var a=1<r.parts.length?1:0;a<r.parts.length;a++)for(var l=r.parts[a],c=1<s.parts.length?1:0;c<s.parts.length;c++){var u,d=s.parts[c];(l===r&&d===s||m.overlaps(l.bounds,d.bounds))&&(u=(u=i[v.id(l,d)])&&u.isActive?u.collision:null,(u=f.collides(l,d,u)).collided&&n.push(u))}}return n},p.canCollide=function(e,t){return e.group===t.group&&0!==e.group?0<e.group:0!=(e.mask&t.category)&&0!=(t.mask&e.category)}},function(e,t,n){var c={};e.exports=c;var u=n(3),d=n(2);c.collides=function(e,t,n){var i,o,r=!1;if(o=n?(i=e.parent,o=t.parent,o=i.speed*i.speed+i.angularSpeed*i.angularSpeed+o.speed*o.speed+o.angularSpeed*o.angularSpeed,r=n&&n.collided&&o<.2,n):{collided:!1,bodyA:e,bodyB:t},n&&r){var r=o.axisBody,s=r===e?t:e,a=[r.axes[n.axisNumber]],s=c._overlapAxes(r.vertices,s.vertices,a);if(o.reused=!0,s.overlap<=0)return o.collided=!1,o}else{if((a=c._overlapAxes(e.vertices,t.vertices,e.axes)).overlap<=0)return o.collided=!1,o;if((l=c._overlapAxes(t.vertices,e.vertices,t.axes)).overlap<=0)return o.collided=!1,o;a.overlap<l.overlap?(s=a,o.axisBody=e):(s=l,o.axisBody=t),o.axisNumber=s.axisNumber}o.bodyA=e.id<t.id?e:t,o.bodyB=e.id<t.id?t:e,o.collided=!0,o.depth=s.overlap,o.parentA=o.bodyA.parent,o.parentB=o.bodyB.parent,e=o.bodyA,t=o.bodyB,d.dot(s.axis,d.sub(t.position,e.position))<0?o.normal={x:s.axis.x,y:s.axis.y}:o.normal={x:-s.axis.x,y:-s.axis.y},o.tangent=d.perp(o.normal),o.penetration=o.penetration||{},o.penetration.x=o.normal.x*o.depth,o.penetration.y=o.normal.y*o.depth;var l=c._findSupports(e,t,o.normal),s=[];return u.contains(e.vertices,l[0])&&s.push(l[0]),u.contains(e.vertices,l[1])&&s.push(l[1]),s.length<2&&(e=c._findSupports(t,e,d.neg(o.normal)),u.contains(t.vertices,e[0])&&s.push(e[0]),s.length<2&&u.contains(t.vertices,e[1])&&s.push(e[1])),s.length<1&&(s=[l[0]]),o.supports=s,o},c._overlapAxes=function(e,t,n){for(var i,o,r=d._temp[0],s=d._temp[1],a={overlap:Number.MAX_VALUE},l=0;l<n.length;l++){if(o=n[l],c._projectToAxis(r,e,o),c._projectToAxis(s,t,o),(i=Math.min(r.max-s.min,s.max-r.min))<=0)return a.overlap=i,a;i<a.overlap&&(a.overlap=i,a.axis=o,a.axisNumber=l)}return a},c._projectToAxis=function(e,t,n){for(var i=d.dot(t[0],n),o=i,r=1;r<t.length;r+=1){var s=d.dot(t[r],n);o<s?o=s:s<i&&(i=s)}e.min=i,e.max=o},c._findSupports=function(e,t,n){for(var i,o,r=Number.MAX_VALUE,s=d._temp[0],a=t.vertices,l=e.position,c=0;c<a.length;c++)u=a[c],s.x=u.x-l.x,s.y=u.y-l.y,(i=-d.dot(n,s))<r&&(r=i,o=u);var u=a[0<=o.index-1?o.index-1:a.length-1];return s.x=u.x-l.x,s.y=u.y-l.y,r=-d.dot(n,s),e=u,u=a[(o.index+1)%a.length],s.x=u.x-l.x,s.y=u.y-l.y,(i=-d.dot(n,s))<r&&(e=u),[o,e]}},function(e,t,n){var s={};e.exports=s;var a=n(0);s._registry={},s.register=function(e){var t,n,i;return s.isPlugin(e)||a.warn("Plugin.register:",s.toString(e),"does not implement all required fields."),e.name in s._registry?(t=s._registry[e.name],n=s.versionParse(e.version).number,(i=s.versionParse(t.version).number)<n?(a.warn("Plugin.register:",s.toString(t),"was upgraded to",s.toString(e)),s._registry[e.name]=e):n<i?a.warn("Plugin.register:",s.toString(t),"can not be downgraded to",s.toString(e)):e!==t&&a.warn("Plugin.register:",s.toString(e),"is already registered to different plugin object")):s._registry[e.name]=e,e},s.resolve=function(e){return s._registry[s.dependencyParse(e).name]},s.toString=function(e){return"string"==typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")},s.isPlugin=function(e){return e&&e.name&&e.version&&e.install},s.isUsed=function(e,t){return-1<e.used.indexOf(t)},s.isFor=function(e,t){var n=e.for&&s.dependencyParse(e.for);return!e.for||t.name===n.name&&s.versionSatisfies(t.version,n.range)},s.use=function(e,t){if(e.uses=(e.uses||[]).concat(t||[]),0!==e.uses.length){for(var n,t=s.dependencies(e),i=a.topologicalSort(t),o=[],r=0;r<i.length;r+=1)i[r]!==e.name&&((n=s.resolve(i[r]))?s.isUsed(e,n.name)||(s.isFor(n,e)||(a.warn("Plugin.use:",s.toString(n),"is for",n.for,"but installed on",s.toString(e)+"."),n._warned=!0),n.install?n.install(e):(a.warn("Plugin.use:",s.toString(n),"does not specify an install function."),n._warned=!0),n._warned?(o.push("🔶 "+s.toString(n)),delete n._warned):o.push("✅ "+s.toString(n)),e.used.push(n.name)):o.push("❌ "+i[r]));0<o.length&&a.info(o.join("  "))}else a.warn("Plugin.use:",s.toString(e),"does not specify any dependencies to install.")},s.dependencies=function(i,e){var o=s.dependencyParse(i),t=o.name;if(!(t in(e=e||{}))){i=s.resolve(i)||i,e[t]=a.map(i.uses||[],function(e){s.isPlugin(e)&&s.register(e);var t=s.dependencyParse(e),n=s.resolve(e);return n&&!s.versionSatisfies(n.version,t.range)?(a.warn("Plugin.dependencies:",s.toString(n),"does not satisfy",s.toString(t),"used by",s.toString(o)+"."),n._warned=!0,i._warned=!0):n||(a.warn("Plugin.dependencies:",s.toString(e),"used by",s.toString(o),"could not be resolved."),i._warned=!0),t.name});for(var n=0;n<e[t].length;n+=1)s.dependencies(e[t][n],e);return e}},s.dependencyParse=function(e){if(a.isString(e))return/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(e)||a.warn("Plugin.dependencyParse:",e,"is not a valid dependency string."),{name:e.split("@")[0],range:e.split("@")[1]||"*"};return{name:e.name,range:e.range||e.version}},s.versionParse=function(e){var t=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-]+)?$/;t.test(e)||a.warn("Plugin.versionParse:",e,"is not a valid version or range.");var n=t.exec(e),i=Number(n[4]),o=Number(n[5]),t=Number(n[6]);return{isRange:Boolean(n[1]||n[2]),version:n[3],range:e,operator:n[1]||n[2]||"",major:i,minor:o,patch:t,parts:[i,o,t],prerelease:n[7],number:1e8*i+1e4*o+t}},s.versionSatisfies=function(e,t){t=t||"*";var n=s.versionParse(t),i=s.versionParse(e);if(n.isRange){if("*"===n.operator||"*"===e)return!0;if(">"===n.operator)return i.number>n.number;if(">="===n.operator)return i.number>=n.number;if("~"===n.operator)return i.major===n.major&&i.minor===n.minor&&i.patch>=n.patch;if("^"===n.operator)return 0<n.major?i.major===n.major&&i.number>=n.number:0<n.minor?i.minor===n.minor&&i.patch>=n.patch:i.patch===n.patch}return e===t||"*"===e}},function(e,t,n){var w={};e.exports=w;var A=n(0),P=n(5),M=n(1),C=n(4),B=n(2),_=n(12);!function(){var i,t;"undefined"!=typeof window&&(i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(A.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),w._goodFps=30,w._goodDelta=1e3/60,w.create=function(e){var t={controller:w,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!e.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},t=A.extend(t,e);return t.canvas&&(t.canvas.width=t.options.width||t.canvas.width,t.canvas.height=t.options.height||t.canvas.height),t.mouse=e.mouse,t.engine=e.engine,t.canvas=t.canvas||n(t.options.width,t.options.height),t.context=t.canvas.getContext("2d"),t.textures={},t.bounds=t.bounds||{min:{x:0,y:0},max:{x:t.canvas.width,y:t.canvas.height}},1!==t.options.pixelRatio&&w.setPixelRatio(t,t.options.pixelRatio),A.isElement(t.element)?t.element.appendChild(t.canvas):t.canvas.parentNode||A.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),t},w.run=function(n){!function e(t){n.frameRequestId=i(e),o(n,t),w.world(n,t),(n.options.showStats||n.options.showDebug)&&w.stats(n,n.context,t),(n.options.showPerformance||n.options.showDebug)&&w.performance(n,n.context,t)}()},w.stop=function(e){t(e.frameRequestId)},w.setPixelRatio=function(e,t){var n=e.options,e=e.canvas;"auto"===t&&(t=r(e)),n.pixelRatio=t,e.setAttribute("data-pixel-ratio",t),e.width=n.width*t,e.height=n.height*t,e.style.width=n.width+"px",e.style.height=n.height+"px"},w.lookAt=function(e,t,n,i){i=void 0===i||i,t=A.isArray(t)?t:[t],n=n||{x:0,y:0};for(var o={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},r=0;r<t.length;r+=1){var s=t[r],a=s.bounds?s.bounds.min:s.min||s.position||s,s=s.bounds?s.bounds.max:s.max||s.position||s;a&&s&&(a.x<o.min.x&&(o.min.x=a.x),s.x>o.max.x&&(o.max.x=s.x),a.y<o.min.y&&(o.min.y=a.y),s.y>o.max.y&&(o.max.y=s.y))}var l=o.max.x-o.min.x+2*n.x,c=o.max.y-o.min.y+2*n.y,u=e.canvas.height,d=e.canvas.width/u,p=l/c,f=1,u=1;d<p?u=p/d:f=d/p,e.options.hasBounds=!0,e.bounds.min.x=o.min.x,e.bounds.max.x=o.min.x+l*f,e.bounds.min.y=o.min.y,e.bounds.max.y=o.min.y+c*u,i&&(e.bounds.min.x+=.5*l-l*f*.5,e.bounds.max.x+=.5*l-l*f*.5,e.bounds.min.y+=.5*c-c*u*.5,e.bounds.max.y+=.5*c-c*u*.5),e.bounds.min.x-=n.x,e.bounds.max.x-=n.x,e.bounds.min.y-=n.y,e.bounds.max.y-=n.y,e.mouse&&(_.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),_.setOffset(e.mouse,e.bounds.min))},w.startViewTransform=function(e){var t=e.bounds.max.x-e.bounds.min.x,n=e.bounds.max.y-e.bounds.min.y,t=t/e.options.width,n=n/e.options.height;e.context.setTransform(e.options.pixelRatio/t,0,0,e.options.pixelRatio/n,0,0),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)},w.endViewTransform=function(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)},w.world=function(e,t){var n,i=A.now(),o=e.engine,r=o.world,s=e.canvas,a=e.context,l=e.options,c=e.timing,u=P.allBodies(r),d=P.allConstraints(r),p=l.wireframes?l.wireframeBackground:l.background,f=[],v=[],r={timestamp:o.timing.timestamp};if(C.trigger(e,"beforeRender",r),e.currentBackground!==p&&S(e,p),a.globalCompositeOperation="source-in",a.fillStyle="transparent",a.fillRect(0,0,s.width,s.height),a.globalCompositeOperation="source-over",l.hasBounds){for(n=0;n<u.length;n++){var m=u[n];M.overlaps(m.bounds,e.bounds)&&f.push(m)}for(n=0;n<d.length;n++){var y=d[n],g=y.bodyA,x=y.bodyB,h=y.pointA,b=y.pointB;g&&(h=B.add(g.position,y.pointA)),x&&(b=B.add(x.position,y.pointB)),h&&b&&(M.contains(e.bounds,h)||M.contains(e.bounds,b))&&v.push(y)}w.startViewTransform(e),e.mouse&&(_.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.options.width,y:(e.bounds.max.y-e.bounds.min.y)/e.options.height}),_.setOffset(e.mouse,e.bounds.min))}else v=d,f=u,1!==e.options.pixelRatio&&e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0);!l.wireframes||o.enableSleeping&&l.showSleeping?w.bodies(e,f,a):(l.showConvexHulls&&w.bodyConvexHulls(e,f,a),w.bodyWireframes(e,f,a)),l.showBounds&&w.bodyBounds(e,f,a),(l.showAxes||l.showAngleIndicator)&&w.bodyAxes(e,f,a),l.showPositions&&w.bodyPositions(e,f,a),l.showVelocity&&w.bodyVelocity(e,f,a),l.showIds&&w.bodyIds(e,f,a),l.showSeparations&&w.separations(e,o.pairs.list,a),l.showCollisions&&w.collisions(e,o.pairs.list,a),l.showVertexNumbers&&w.vertexNumbers(e,f,a),l.showMousePosition&&w.mousePosition(e,e.mouse,a),w.constraints(v,a),l.showBroadphase&&w.grid(e,o.grid,a),l.hasBounds&&w.endViewTransform(e),C.trigger(e,"afterRender",r),c.lastElapsed=A.now()-i},w.stats=function(e,t,n){for(var i=e.engine,e=i.world,o=P.allBodies(e),r=0,s=0,a=0;a<o.length;a+=1)r+=o[a].parts.length;var l,c={Part:r,Body:o.length,Cons:P.allConstraints(e).length,Comp:P.allComposites(e).length,Pair:i.pairs.list.length};for(l in t.fillStyle="#0e0f19",t.fillRect(s,0,302.5,44),t.font="12px Arial",t.textBaseline="top",t.textAlign="right",c){var u=c[l];t.fillStyle="#aaa",t.fillText(l,s+55,8),t.fillStyle="#eee",t.fillText(u,s+55,26),s+=55}},w.performance=function(e,t){var n=e.engine,e=e.timing,i=e.deltaHistory,o=e.elapsedHistory,r=e.timestampElapsedHistory,s=e.engineDeltaHistory,a=e.engineElapsedHistory,e=n.timing.lastDelta,l=f(i),c=f(o),u=f(s),d=f(a),p=f(r)/l||0,n=1e3/l||0;t.fillStyle="#0e0f19",t.fillRect(0,50,370,34),w.status(t,10,69,60,4,i.length,Math.round(n)+" fps",n/w._goodFps,function(e){return i[e]/l-1}),w.status(t,82,69,60,4,s.length,e.toFixed(2)+" dt",w._goodDelta/e,function(e){return s[e]/u-1}),w.status(t,154,69,60,4,a.length,d.toFixed(2)+" ut",1-d/w._goodFps,function(e){return a[e]/d-1}),w.status(t,226,69,60,4,o.length,c.toFixed(2)+" rt",1-c/w._goodFps,function(e){return o[e]/c-1}),w.status(t,298,69,60,4,r.length,p.toFixed(2)+" x",p*p*p,function(e){return(r[e]/i[e]/p||0)-1})},w.status=function(e,t,n,i,o,r,s,a,l){e.strokeStyle="#888",e.fillStyle="#444",e.lineWidth=1,e.fillRect(t,n+7,i,1),e.beginPath(),e.moveTo(t,n+7-o*A.clamp(.4*l(0),-2,2));for(var c=0;c<i;c+=1)e.lineTo(t+c,n+7-(c<r?o*A.clamp(.4*l(c),-2,2):0));e.stroke(),e.fillStyle="hsl("+A.clamp(25+95*a,0,120)+",100%,60%)",e.fillRect(t,n-7,4,4),e.font="12px Arial",e.textBaseline="middle",e.textAlign="right",e.fillStyle="#eee",e.fillText(s,t+i,n-5)},w.constraints=function(e,t){for(var n=t,i=0;i<e.length;i++){var o=e[i];if(o.render.visible&&o.pointA&&o.pointB){var r,s=o.bodyA,a=o.bodyB,l=s?B.add(s.position,o.pointA):o.pointA;if("pin"===o.render.type)n.beginPath(),n.arc(l.x,l.y,3,0,2*Math.PI),n.closePath();else{if(r=a?B.add(a.position,o.pointB):o.pointB,n.beginPath(),n.moveTo(l.x,l.y),"spring"===o.render.type)for(var c,u=B.sub(r,l),d=B.perp(B.normalise(u)),p=Math.ceil(A.clamp(o.length/5,12,20)),f=1;f<p;f+=1)c=f%2==0?1:-1,n.lineTo(l.x+u.x*(f/p)+d.x*c*4,l.y+u.y*(f/p)+d.y*c*4);n.lineTo(r.x,r.y)}o.render.lineWidth&&(n.lineWidth=o.render.lineWidth,n.strokeStyle=o.render.strokeStyle,n.stroke()),o.render.anchors&&(n.fillStyle=o.render.strokeStyle,n.beginPath(),n.arc(l.x,l.y,3,0,2*Math.PI),n.arc(r.x,r.y,3,0,2*Math.PI),n.closePath(),n.fill())}}},w.bodies=function(e,t,n){for(var i,o,r,s=n,a=(e.engine,e.options),l=a.showInternalEdges||!a.wireframes,c=0;c<t.length;c++)if((i=t[c]).render.visible)for(r=1<i.parts.length?1:0;r<i.parts.length;r++)if((o=i.parts[r]).render.visible){if(a.showSleeping&&i.isSleeping?s.globalAlpha=.5*o.render.opacity:1!==o.render.opacity&&(s.globalAlpha=o.render.opacity),o.render.sprite&&o.render.sprite.texture&&!a.wireframes){var u=o.render.sprite,d=v(e,u.texture);s.translate(o.position.x,o.position.y),s.rotate(o.angle),s.drawImage(d,d.width*-u.xOffset*u.xScale,d.height*-u.yOffset*u.yScale,d.width*u.xScale,d.height*u.yScale),s.rotate(-o.angle),s.translate(-o.position.x,-o.position.y)}else{if(o.circleRadius)s.beginPath(),s.arc(o.position.x,o.position.y,o.circleRadius,0,2*Math.PI);else{s.beginPath(),s.moveTo(o.vertices[0].x,o.vertices[0].y);for(var p=1;p<o.vertices.length;p++)!o.vertices[p-1].isInternal||l?s.lineTo(o.vertices[p].x,o.vertices[p].y):s.moveTo(o.vertices[p].x,o.vertices[p].y),o.vertices[p].isInternal&&!l&&s.moveTo(o.vertices[(p+1)%o.vertices.length].x,o.vertices[(p+1)%o.vertices.length].y);s.lineTo(o.vertices[0].x,o.vertices[0].y),s.closePath()}a.wireframes?(s.lineWidth=1,s.strokeStyle="#bbb",s.stroke()):(s.fillStyle=o.render.fillStyle,o.render.lineWidth&&(s.lineWidth=o.render.lineWidth,s.strokeStyle=o.render.strokeStyle,s.stroke()),s.fill())}s.globalAlpha=1}},w.bodyWireframes=function(e,t,n){var i,o,r,s,a,l=n,c=e.options.showInternalEdges;for(l.beginPath(),r=0;r<t.length;r++)if((i=t[r]).render.visible)for(a=1<i.parts.length?1:0;a<i.parts.length;a++){for(o=i.parts[a],l.moveTo(o.vertices[0].x,o.vertices[0].y),s=1;s<o.vertices.length;s++)!o.vertices[s-1].isInternal||c?l.lineTo(o.vertices[s].x,o.vertices[s].y):l.moveTo(o.vertices[s].x,o.vertices[s].y),o.vertices[s].isInternal&&!c&&l.moveTo(o.vertices[(s+1)%o.vertices.length].x,o.vertices[(s+1)%o.vertices.length].y);l.lineTo(o.vertices[0].x,o.vertices[0].y)}l.lineWidth=1,l.strokeStyle="#bbb",l.stroke()},w.bodyConvexHulls=function(e,t,n){var i,o,r,s=n;for(s.beginPath(),o=0;o<t.length;o++)if((i=t[o]).render.visible&&1!==i.parts.length){for(s.moveTo(i.vertices[0].x,i.vertices[0].y),r=1;r<i.vertices.length;r++)s.lineTo(i.vertices[r].x,i.vertices[r].y);s.lineTo(i.vertices[0].x,i.vertices[0].y)}s.lineWidth=1,s.strokeStyle="rgba(255,255,255,0.2)",s.stroke()},w.vertexNumbers=function(e,t,n){for(var i=n,o=0;o<t.length;o++)for(var r=t[o].parts,s=1<r.length?1:0;s<r.length;s++)for(var a=r[s],l=0;l<a.vertices.length;l++)i.fillStyle="rgba(255,255,255,0.2)",i.fillText(o+"_"+l,a.position.x+.8*(a.vertices[l].x-a.position.x),a.position.y+.8*(a.vertices[l].y-a.position.y))},w.mousePosition=function(e,t,n){n.fillStyle="rgba(255,255,255,0.8)",n.fillText(t.position.x+"  "+t.position.y,t.position.x+5,t.position.y-5)},w.bodyBounds=function(e,t,n){var i=n,e=(e.engine,e.options);i.beginPath();for(var o=0;o<t.length;o++)if(t[o].render.visible)for(var r=t[o].parts,s=1<r.length?1:0;s<r.length;s++){var a=r[s];i.rect(a.bounds.min.x,a.bounds.min.y,a.bounds.max.x-a.bounds.min.x,a.bounds.max.y-a.bounds.min.y)}e.wireframes?i.strokeStyle="rgba(255,255,255,0.08)":i.strokeStyle="rgba(0,0,0,0.1)",i.lineWidth=1,i.stroke()},w.bodyAxes=function(e,t,n){var i,o,r,s,a=n,l=(e.engine,e.options);for(a.beginPath(),o=0;o<t.length;o++){var c=t[o],u=c.parts;if(c.render.visible)if(l.showAxes)for(r=1<u.length?1:0;r<u.length;r++)for(i=u[r],s=0;s<i.axes.length;s++){var d=i.axes[s];a.moveTo(i.position.x,i.position.y),a.lineTo(i.position.x+20*d.x,i.position.y+20*d.y)}else for(r=1<u.length?1:0;r<u.length;r++)for(i=u[r],s=0;s<i.axes.length;s++)a.moveTo(i.position.x,i.position.y),a.lineTo((i.vertices[0].x+i.vertices[i.vertices.length-1].x)/2,(i.vertices[0].y+i.vertices[i.vertices.length-1].y)/2)}l.wireframes?(a.strokeStyle="indianred",a.lineWidth=1):(a.strokeStyle="rgba(255, 255, 255, 0.4)",a.globalCompositeOperation="overlay",a.lineWidth=2),a.stroke(),a.globalCompositeOperation="source-over"},w.bodyPositions=function(e,t,n){var i,o,r,s,a=n,e=(e.engine,e.options);for(a.beginPath(),r=0;r<t.length;r++)if((i=t[r]).render.visible)for(s=0;s<i.parts.length;s++)o=i.parts[s],a.arc(o.position.x,o.position.y,3,0,2*Math.PI,!1),a.closePath();for(e.wireframes?a.fillStyle="indianred":a.fillStyle="rgba(0,0,0,0.5)",a.fill(),a.beginPath(),r=0;r<t.length;r++)(i=t[r]).render.visible&&(a.arc(i.positionPrev.x,i.positionPrev.y,2,0,2*Math.PI,!1),a.closePath());a.fillStyle="rgba(255,165,0,0.8)",a.fill()},w.bodyVelocity=function(e,t,n){var i=n;i.beginPath();for(var o=0;o<t.length;o++){var r=t[o];r.render.visible&&(i.moveTo(r.position.x,r.position.y),i.lineTo(r.position.x+2*(r.position.x-r.positionPrev.x),r.position.y+2*(r.position.y-r.positionPrev.y)))}i.lineWidth=3,i.strokeStyle="cornflowerblue",i.stroke()},w.bodyIds=function(e,t,n){for(var i=n,o=0;o<t.length;o++)if(t[o].render.visible)for(var r=t[o].parts,s=1<r.length?1:0;s<r.length;s++){var a=r[s];i.font="12px Arial",i.fillStyle="rgba(255,255,255,0.5)",i.fillText(a.id,a.position.x+10,a.position.y-10)}},w.collisions=function(e,t,n){var i,o,r,s,a,l,c=n,e=e.options;for(c.beginPath(),i=0;i<t.length;i++)if((l=t[i]).isActive)for(a=l.collision,o=0;o<l.activeContacts.length;o++){var u=l.activeContacts[o].vertex;c.rect(u.x-1.5,u.y-1.5,3.5,3.5)}for(e.wireframes?c.fillStyle="rgba(255,255,255,0.7)":c.fillStyle="orange",c.fill(),c.beginPath(),i=0;i<t.length;i++)(l=t[i]).isActive&&(a=l.collision,0<l.activeContacts.length&&(r=l.activeContacts[0].vertex.x,s=l.activeContacts[0].vertex.y,2===l.activeContacts.length&&(r=(l.activeContacts[0].vertex.x+l.activeContacts[1].vertex.x)/2,s=(l.activeContacts[0].vertex.y+l.activeContacts[1].vertex.y)/2),a.bodyB===a.supports[0].body||!0===a.bodyA.isStatic?c.moveTo(r-8*a.normal.x,s-8*a.normal.y):c.moveTo(r+8*a.normal.x,s+8*a.normal.y),c.lineTo(r,s)));e.wireframes?c.strokeStyle="rgba(255,165,0,0.7)":c.strokeStyle="orange",c.lineWidth=1,c.stroke()},w.separations=function(e,t,n){var i,o,r,s,a,l=n,e=e.options;for(l.beginPath(),r=0;r<t.length;r++)(a=t[r]).isActive&&(o=(i=a.collision).bodyA,s=1,(a=i.bodyB).isStatic||o.isStatic||(s=.5),a.isStatic&&(s=0),l.moveTo(a.position.x,a.position.y),l.lineTo(a.position.x-i.penetration.x*s,a.position.y-i.penetration.y*s),s=1,a.isStatic||o.isStatic||(s=.5),o.isStatic&&(s=0),l.moveTo(o.position.x,o.position.y),l.lineTo(o.position.x+i.penetration.x*s,o.position.y+i.penetration.y*s));e.wireframes?l.strokeStyle="rgba(255,165,0,0.5)":l.strokeStyle="orange",l.stroke()},w.grid=function(e,t,n){var i=n;e.options.wireframes?i.strokeStyle="rgba(255,180,0,0.1)":i.strokeStyle="rgba(255,180,0,0.5)",i.beginPath();for(var o=A.keys(t.buckets),r=0;r<o.length;r++){var s=o[r];t.buckets[s].length<2||(s=s.split(/C|R/),i.rect(.5+parseInt(s[1],10)*t.bucketWidth,.5+parseInt(s[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight))}i.lineWidth=1,i.stroke()},w.inspector=function(e,t){e.engine;var n,i,o,r=e.selected,s=e.render,a=s.options;a.hasBounds&&(i=s.bounds.max.x-s.bounds.min.x,o=s.bounds.max.y-s.bounds.min.y,i=i/s.options.width,o=o/s.options.height,t.scale(1/i,1/o),t.translate(-s.bounds.min.x,-s.bounds.min.y));for(var l=0;l<r.length;l++){var c=r[l].data;switch(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.9)",t.setLineDash([1,2]),c.type){case"body":n=c.bounds,t.beginPath(),t.rect(Math.floor(n.min.x-3),Math.floor(n.min.y-3),Math.floor(n.max.x-n.min.x+6),Math.floor(n.max.y-n.min.y+6)),t.closePath(),t.stroke();break;case"constraint":var u=c.pointA;c.bodyA&&(u=c.pointB),t.beginPath(),t.arc(u.x,u.y,10,0,2*Math.PI),t.closePath(),t.stroke()}t.setLineDash([]),t.translate(-.5,-.5)}null!==e.selectStart&&(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.6)",t.fillStyle="rgba(255,165,0,0.1)",n=e.selectBounds,t.beginPath(),t.rect(Math.floor(n.min.x),Math.floor(n.min.y),Math.floor(n.max.x-n.min.x),Math.floor(n.max.y-n.min.y)),t.closePath(),t.stroke(),t.fill(),t.translate(-.5,-.5)),a.hasBounds&&t.setTransform(1,0,0,1,0,0)};var o=function(e,t){var n=e.engine,i=e.timing,o=i.historySize,e=n.timing.timestamp;i.delta=t-i.lastTime||w._goodDelta,i.lastTime=t,i.timestampElapsed=e-i.lastTimestamp||0,i.lastTimestamp=e,i.deltaHistory.unshift(i.delta),i.deltaHistory.length=Math.min(i.deltaHistory.length,o),i.engineDeltaHistory.unshift(n.timing.lastDelta),i.engineDeltaHistory.length=Math.min(i.engineDeltaHistory.length,o),i.timestampElapsedHistory.unshift(i.timestampElapsed),i.timestampElapsedHistory.length=Math.min(i.timestampElapsedHistory.length,o),i.engineElapsedHistory.unshift(n.timing.lastElapsed),i.engineElapsedHistory.length=Math.min(i.engineElapsedHistory.length,o),i.elapsedHistory.unshift(i.lastElapsed),i.elapsedHistory.length=Math.min(i.elapsedHistory.length,o)},f=function(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length||0},n=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n.oncontextmenu=function(){return!1},n.onselectstart=function(){return!1},n},r=function(e){e=e.getContext("2d");return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)},v=function(e,t){var n=e.textures[t];return n||((n=e.textures[t]=new Image).src=t,n)},S=function(e,t){var n=t;/(jpg|gif|png)$/.test(t)&&(n="url("+t+")"),e.canvas.style.background=n,e.canvas.style.backgroundSize="contain",e.currentBackground=t}}()},function(e,t){var n={};(e.exports=n).create=function(e){return{id:n.id(e),vertex:e,normalImpulse:0,tangentImpulse:0}},n.id=function(e){return e.body.id+"_"+e.index}},function(e,t,n){var f={};e.exports=f;var v=n(7),m=n(19),y=n(13),g=n(20),x=n(21),h=n(4),b=n(5),S=n(8),w=n(0),a=n(6);f.create=function(e){e=e||{};var t=w.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},grid:null,gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},e);return t.world=e.world||b.create({label:"World"}),t.grid=x.create(e.grid||e.broadphase),t.pairs=g.create(),t.world.gravity=t.gravity,t.broadphase=t.grid,t.metrics={},t},f.update=function(e,t,n){var i=w.now();t=t||1e3/60,n=n||1;var o,r=e.world,s=e.timing,a=e.grid;s.timestamp+=t*s.timeScale,s.lastDelta=t*s.timeScale;var l={timestamp:s.timestamp};h.trigger(e,"beforeUpdate",l);var c=b.allBodies(r),u=b.allConstraints(r);for(e.enableSleeping&&v.update(c,s.timeScale),f._bodiesApplyGravity(c,e.gravity),f._bodiesUpdate(c,t,s.timeScale,n,r.bounds),S.preSolveAll(c),o=0;o<e.constraintIterations;o++)S.solveAll(u,s.timeScale);S.postSolveAll(c),r.isModified&&x.clear(a),x.update(a,c,e,r.isModified),p=a.pairsList,r.isModified&&b.setModified(r,!1,!1,!0);var r=y.collisions(p,e),d=e.pairs,p=s.timestamp;for(g.update(d,r,p),g.removeOld(d,p),e.enableSleeping&&v.afterCollisions(d.list,s.timeScale),0<d.collisionStart.length&&h.trigger(e,"collisionStart",{pairs:d.collisionStart}),m.preSolvePosition(d.list),o=0;o<e.positionIterations;o++)m.solvePosition(d.list,s.timeScale);for(m.postSolvePosition(c),S.preSolveAll(c),o=0;o<e.constraintIterations;o++)S.solveAll(u,s.timeScale);for(S.postSolveAll(c),m.preSolveVelocity(d.list),o=0;o<e.velocityIterations;o++)m.solveVelocity(d.list,s.timeScale);return 0<d.collisionActive.length&&h.trigger(e,"collisionActive",{pairs:d.collisionActive}),0<d.collisionEnd.length&&h.trigger(e,"collisionEnd",{pairs:d.collisionEnd}),f._bodiesClearForces(c),h.trigger(e,"afterUpdate",l),e.timing.lastElapsed=w.now()-i,e},f.merge=function(e,t){if(w.extend(e,t),t.world){e.world=t.world,f.clear(e);for(var n=b.allBodies(e.world),i=0;i<n.length;i++){var o=n[i];v.set(o,!1),o.id=w.nextId()}}},f.clear=function(e){var t=e.world,t=b.allBodies(t);g.clear(e.pairs),x.clear(e.grid),x.update(e.grid,t,e,!0)},f._bodiesClearForces=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.force.x=0,n.force.y=0,n.torque=0}},f._bodiesApplyGravity=function(e,t){var n=void 0!==t.scale?t.scale:.001;if((0!==t.x||0!==t.y)&&0!==n)for(var i=0;i<e.length;i++){var o=e[i];o.isStatic||o.isSleeping||(o.force.y+=o.mass*t.y*n,o.force.x+=o.mass*t.x*n)}},f._bodiesUpdate=function(e,t,n,i,o){for(var r=0;r<e.length;r++){var s=e[r];s.isStatic||s.isSleeping||a.update(s,t,n,i)}}},function(e,t,n){var I={};e.exports=I;var r=n(3),T=n(2),R=n(0),s=n(1);I._restingThresh=4,I._restingThreshTangent=6,I._positionDampen=.9,I._positionWarming=.8,I._frictionNormalMultiplier=5,I.preSolvePosition=function(e){for(var t,n,i=0;i<e.length;i++)(t=e[i]).isActive&&(n=t.activeContacts.length,t.collision.parentA.totalContacts+=n,t.collision.parentB.totalContacts+=n)},I.solvePosition=function(e,t){for(var n,i,o,r,s,a,l,c,u=T._temp[0],d=T._temp[1],p=T._temp[2],f=T._temp[3],v=0;v<e.length;v++)(n=e[v]).isActive&&!n.isSensor&&(o=(i=n.collision).parentA,r=i.parentB,s=i.normal,a=T.sub(T.add(r.positionImpulse,r.position,u),T.add(o.positionImpulse,T.sub(r.position,i.penetration,d),p),f),n.separation=T.dot(s,a));for(v=0;v<e.length;v++)(n=e[v]).isActive&&!n.isSensor&&(o=(i=n.collision).parentA,r=i.parentB,s=i.normal,c=(n.separation-n.slop)*t,(o.isStatic||r.isStatic)&&(c*=2),o.isStatic||o.isSleeping||(l=I._positionDampen/o.totalContacts,o.positionImpulse.x+=s.x*c*l,o.positionImpulse.y+=s.y*c*l),r.isStatic||r.isSleeping||(l=I._positionDampen/r.totalContacts,r.positionImpulse.x-=s.x*c*l,r.positionImpulse.y-=s.y*c*l))},I.postSolvePosition=function(e){for(var t=0;t<e.length;t++){var n=e[t];if((n.totalContacts=0)!==n.positionImpulse.x||0!==n.positionImpulse.y){for(var i=0;i<n.parts.length;i++){var o=n.parts[i];r.translate(o.vertices,n.positionImpulse),s.update(o.bounds,o.vertices,n.velocity),o.position.x+=n.positionImpulse.x,o.position.y+=n.positionImpulse.y}n.positionPrev.x+=n.positionImpulse.x,n.positionPrev.y+=n.positionImpulse.y,T.dot(n.positionImpulse,n.velocity)<0?(n.positionImpulse.x=0,n.positionImpulse.y=0):(n.positionImpulse.x*=I._positionWarming,n.positionImpulse.y*=I._positionWarming)}}},I.preSolveVelocity=function(e){for(var t,n,i,o,r,s,a,l,c,u,d,p=T._temp[0],f=T._temp[1],v=0;v<e.length;v++)if((i=e[v]).isActive&&!i.isSensor)for(n=i.activeContacts,o=(i=i.collision).parentA,r=i.parentB,s=i.normal,a=i.tangent,t=0;t<n.length;t++)l=(u=n[t]).vertex,c=u.normalImpulse,u=u.tangentImpulse,0===c&&0===u||(p.x=s.x*c+a.x*u,p.y=s.y*c+a.y*u,o.isStatic||o.isSleeping||(d=T.sub(l,o.position,f),o.positionPrev.x+=p.x*o.inverseMass,o.positionPrev.y+=p.y*o.inverseMass,o.anglePrev+=T.cross(d,p)*o.inverseInertia),r.isStatic||r.isSleeping||(d=T.sub(l,r.position,f),r.positionPrev.x-=p.x*r.inverseMass,r.positionPrev.y-=p.y*r.inverseMass,r.anglePrev-=T.cross(d,p)*r.inverseInertia))},I.solveVelocity=function(e,t){for(var n=t*t,i=T._temp[0],o=T._temp[1],r=T._temp[2],s=T._temp[3],a=T._temp[4],l=T._temp[5],c=0;c<e.length;c++){var u=e[c];if(u.isActive&&!u.isSensor){var d=u.collision,p=d.parentA,f=d.parentB,v=d.normal,m=d.tangent,y=u.activeContacts,g=1/y.length;p.velocity.x=p.position.x-p.positionPrev.x,p.velocity.y=p.position.y-p.positionPrev.y,f.velocity.x=f.position.x-f.positionPrev.x,f.velocity.y=f.position.y-f.positionPrev.y,p.angularVelocity=p.angle-p.anglePrev,f.angularVelocity=f.angle-f.anglePrev;for(var x=0;x<y.length;x++){var h=y[x],b=h.vertex,S=T.sub(b,p.position,o),w=T.sub(b,f.position,r),A=T.add(p.velocity,T.mult(T.perp(S),p.angularVelocity),s),P=T.add(f.velocity,T.mult(T.perp(w),f.angularVelocity),a),M=T.sub(A,P,l),C=T.dot(v,M),B=T.dot(m,M),_=Math.abs(B),k=R.sign(B),b=(1+u.restitution)*C,A=R.clamp(u.separation+C,0,1)*I._frictionNormalMultiplier,P=B,M=1/0;_>u.friction*u.frictionStatic*A*n&&(M=_,P=R.clamp(u.friction*k*n,-M,M));_=T.cross(S,v),k=T.cross(w,v),k=g/(p.inverseMass+f.inverseMass+p.inverseInertia*_*_+f.inverseInertia*k*k);b*=k,P*=k,C<0&&C*C>I._restingThresh*n?h.normalImpulse=0:(C=h.normalImpulse,h.normalImpulse=Math.min(h.normalImpulse+b,0),b=h.normalImpulse-C),B*B>I._restingThreshTangent*n?h.tangentImpulse=0:(B=h.tangentImpulse,h.tangentImpulse=R.clamp(h.tangentImpulse+P,-M,M),P=h.tangentImpulse-B),i.x=v.x*b+m.x*P,i.y=v.y*b+m.y*P,p.isStatic||p.isSleeping||(p.positionPrev.x+=i.x*p.inverseMass,p.positionPrev.y+=i.y*p.inverseMass,p.anglePrev+=T.cross(S,i)*p.inverseInertia),f.isStatic||f.isSleeping||(f.positionPrev.x-=i.x*f.inverseMass,f.positionPrev.y-=i.y*f.inverseMass,f.anglePrev-=T.cross(w,i)*f.inverseInertia)}}}}},function(e,t,n){var c={};e.exports=c;var p=n(9),i=n(0);c._pairMaxIdleLife=1e3,c.create=function(e){return i.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},c.update=function(e,t,n){var i,o,r,s,a=e.list,l=e.table,c=e.collisionStart,u=e.collisionEnd,d=e.collisionActive;for(c.length=0,u.length=0,s=d.length=0;s<a.length;s++)a[s].confirmedActive=!1;for(s=0;s<t.length;s++)(i=t[s]).collided&&((r=l[o=p.id(i.bodyA,i.bodyB)])?((r.isActive?d:c).push(r),p.update(r,i,n),r.confirmedActive=!0):(r=p.create(i,n),l[o]=r,c.push(r),a.push(r)));for(s=0;s<a.length;s++)(r=a[s]).isActive&&!r.confirmedActive&&(p.setActive(r,!1,n),u.push(r))},c.removeOld=function(e,t){for(var n,i,o,r=e.list,s=e.table,a=[],l=0;l<r.length;l++)(i=(n=r[l]).collision).bodyA.isSleeping||i.bodyB.isSleeping?n.timeUpdated=t:t-n.timeUpdated>c._pairMaxIdleLife&&a.push(l);for(l=0;l<a.length;l++)delete s[(n=r[o=a[l]-l]).id],r.splice(o,1)},c.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e}},function(e,t,n){var g={};e.exports=g;var a=n(9),r=n(0);g.create=function(e){return r.extend({buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48},e)},g.update=function(e,t,n,i){for(var o,r,s,a=n.world,l=e.buckets,c=!1,u=0;u<t.length;u++){var d=t[u];if((!d.isSleeping||i)&&(!a.bounds||!(d.bounds.max.x<a.bounds.min.x||d.bounds.min.x>a.bounds.max.x||d.bounds.max.y<a.bounds.min.y||d.bounds.min.y>a.bounds.max.y))){var p=g._getRegion(e,d);if(!d.region||p.id!==d.region.id||i){d.region&&!i||(d.region=p);for(var f=g._regionUnion(p,d.region),v=f.startCol;v<=f.endCol;v++)for(o=f.startRow;o<=f.endRow;o++){r=l[s=g._getBucketId(v,o)];var m=v>=p.startCol&&v<=p.endCol&&o>=p.startRow&&o<=p.endRow,y=v>=d.region.startCol&&v<=d.region.endCol&&o>=d.region.startRow&&o<=d.region.endRow;!m&&y&&y&&r&&g._bucketRemoveBody(e,r,d),(d.region===p||m&&!y||i)&&(r=r||g._createBucket(l,s),g._bucketAddBody(e,r,d))}d.region=p,c=!0}}}c&&(e.pairsList=g._createActivePairsList(e))},g.clear=function(e){e.buckets={},e.pairs={},e.pairsList=[]},g._regionUnion=function(e,t){var n=Math.min(e.startCol,t.startCol),i=Math.max(e.endCol,t.endCol),o=Math.min(e.startRow,t.startRow),t=Math.max(e.endRow,t.endRow);return g._createRegion(n,i,o,t)},g._getRegion=function(e,t){var n=t.bounds,i=Math.floor(n.min.x/e.bucketWidth),o=Math.floor(n.max.x/e.bucketWidth),t=Math.floor(n.min.y/e.bucketHeight),e=Math.floor(n.max.y/e.bucketHeight);return g._createRegion(i,o,t,e)},g._createRegion=function(e,t,n,i){return{id:e+","+t+","+n+","+i,startCol:e,endCol:t,startRow:n,endRow:i}},g._getBucketId=function(e,t){return"C"+e+"R"+t},g._createBucket=function(e,t){return e[t]=[]},g._bucketAddBody=function(e,t,n){for(var i=0;i<t.length;i++){var o,r,s=t[i];n.id===s.id||n.isStatic&&s.isStatic||(o=a.id(n,s),(r=e.pairs[o])?r[2]+=1:e.pairs[o]=[n,s,1])}t.push(n)},g._bucketRemoveBody=function(e,t,n){t.splice(r.indexOf(t,n),1);for(var i=0;i<t.length;i++){var o=t[i],o=a.id(n,o),o=e.pairs[o];o&&--o[2]}},g._createActivePairsList=function(e){for(var t,n=[],i=r.keys(e.pairs),o=0;o<i.length;o++)0<(t=e.pairs[i[o]])[2]?n.push(t):delete e.pairs[i[o]];return n}},function(e,t,n){e=e.exports=n(23);e.Axes=n(10),e.Bodies=n(11),e.Body=n(6),e.Bounds=n(1),e.Common=n(0),e.Composite=n(5),e.Composites=n(24),e.Constraint=n(8),e.Contact=n(17),e.Detector=n(13),e.Engine=n(18),e.Events=n(4),e.Grid=n(21),e.Mouse=n(12),e.MouseConstraint=n(25),e.Pair=n(9),e.Pairs=n(20),e.Plugin=n(15),e.Query=n(26),e.Render=n(16),e.Resolver=n(19),e.Runner=n(27),e.SAT=n(14),e.Sleeping=n(7),e.Svg=n(28),e.Vector=n(2),e.Vertices=n(3),e.World=n(29),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(e,t,n){var i={};e.exports=i;var o=n(15),r=n(0);i.name="matter-js",i.version="0.17.1",i.uses=[],i.used=[],i.use=function(){o.use(i,Array.prototype.slice.call(arguments))},i.before=function(e,t){return e=e.replace(/^Matter./,""),r.chainPathBefore(i,e,t)},i.after=function(e,t){return e=e.replace(/^Matter./,""),r.chainPathAfter(i,e,t)}},function(e,t,n){var v={};e.exports=v;var x=n(5),f=n(8),m=n(0),h=n(6),u=n(11),n=m.deprecated;v.stack=function(e,t,n,i,o,r,s){for(var a,l=x.create({label:"Stack"}),c=e,u=t,d=0,p=0;p<i;p++){for(var f=0,v=0;v<n;v++){var m,y,g=s(c,u,v,p,a,d);g?(m=g.bounds.max.y-g.bounds.min.y,y=g.bounds.max.x-g.bounds.min.x,f<m&&(f=m),h.translate(g,{x:.5*y,y:.5*m}),c=g.bounds.max.x+o,x.addBody(l,g),a=g,d+=1):c+=o}u+=f+r,c=e}return l},v.chain=function(e,t,n,i,o,r){for(var s=e.bodies,a=1;a<s.length;a++){var l=s[a-1],c=s[a],u=l.bounds.max.y-l.bounds.min.y,d=l.bounds.max.x-l.bounds.min.x,p=c.bounds.max.y-c.bounds.min.y,p={bodyA:l,pointA:{x:d*t,y:u*n},bodyB:c,pointB:{x:(c.bounds.max.x-c.bounds.min.x)*i,y:p*o}},p=m.extend(p,r);x.addConstraint(e,f.create(p))}return e.label+=" Chain",e},v.mesh=function(e,t,n,i,o){for(var r,s,a,l,c=e.bodies,u=0;u<n;u++){for(r=1;r<t;r++)s=c[r-1+u*t],a=c[r+u*t],x.addConstraint(e,f.create(m.extend({bodyA:s,bodyB:a},o)));if(0<u)for(r=0;r<t;r++)s=c[r+(u-1)*t],a=c[r+u*t],x.addConstraint(e,f.create(m.extend({bodyA:s,bodyB:a},o))),i&&0<r&&(l=c[r-1+(u-1)*t],x.addConstraint(e,f.create(m.extend({bodyA:l,bodyB:a},o)))),i&&r<t-1&&(l=c[r+1+(u-1)*t],x.addConstraint(e,f.create(m.extend({bodyA:l,bodyB:a},o))))}return e.label+=" Mesh",e},v.pyramid=function(c,e,u,d,p,t,f){return v.stack(c,e,u,d,p,t,function(e,t,n,i,o,r){var s=Math.min(d,Math.ceil(u/2)),a=o?o.bounds.max.x-o.bounds.min.x:0;if(!(s<i)){var l=i=s-i,s=u-1-i;if(!(n<l||s<n))return 1===r&&h.translate(o,{x:(n+(u%2==1?1:-1))*a,y:0}),f(c+(o?n*a:0)+n*p,t,n,i,o,r)}})},v.newtonsCradle=function(e,t,n,i,o){for(var r=x.create({label:"Newtons Cradle"}),s=0;s<n;s++){var a=u.circle(e+s*(1.9*i),t+o,i,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),l=f.create({pointA:{x:e+s*(1.9*i),y:t},bodyB:a});x.addBody(r,a),x.addConstraint(r,l)}return r},n(v,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),v.car=function(e,t,n,i,o){var r=h.nextGroup(!0),s=.5*-n+20,a=.5*n-20,l=x.create({label:"Car"}),n=u.rectangle(e,t,n,i,{collisionFilter:{group:r},chamfer:{radius:.5*i},density:2e-4}),i=u.circle(e+s,t+0,o,{collisionFilter:{group:r},friction:.8}),r=u.circle(e+a,t+0,o,{collisionFilter:{group:r},friction:.8}),s=f.create({bodyB:n,pointB:{x:s,y:0},bodyA:i,stiffness:1,length:0}),a=f.create({bodyB:n,pointB:{x:a,y:0},bodyA:r,stiffness:1,length:0});return x.addBody(l,n),x.addBody(l,i),x.addBody(l,r),x.addConstraint(l,s),x.addConstraint(l,a),l},n(v,"car","Composites.car ➤ moved to car example"),v.softBody=function(e,t,n,i,o,r,s,a,l,c){l=m.extend({inertia:1/0},l),c=m.extend({stiffness:.2,render:{type:"line",anchors:!1}},c);r=v.stack(e,t,n,i,o,r,function(e,t){return u.circle(e,t,a,l)});return v.mesh(r,n,i,s,c),r.label="Soft Body",r},n(v,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")},function(e,t,n){var o={};e.exports=o;var l=n(3),c=n(7),r=n(12),u=n(4),d=n(13),s=n(8),a=n(5),p=n(0),f=n(1);o.create=function(t,e){var n=(t?t.mouse:null)||(e?e.mouse:null);n||(t&&t.render&&t.render.canvas?n=r.create(t.render.canvas):e&&e.element?n=r.create(e.element):(n=r.create(),p.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var n={type:"mouseConstraint",mouse:n,element:null,body:null,constraint:s.create({label:"Mouse Constraint",pointA:n.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),collisionFilter:{category:1,mask:4294967295,group:0}},i=p.extend(n,e);return u.on(t,"beforeUpdate",function(){var e=a.allBodies(t.world);o.update(i,e),o._triggerEvents(i)}),i},o.update=function(e,t){var n=e.mouse,i=e.constraint,o=e.body;if(0===n.button){if(i.bodyB)c.set(i.bodyB,!1),i.pointA=n.position;else for(var r=0;r<t.length;r++)if(o=t[r],f.contains(o.bounds,n.position)&&d.canCollide(o.collisionFilter,e.collisionFilter))for(var s=1<o.parts.length?1:0;s<o.parts.length;s++){var a=o.parts[s];if(l.contains(a.vertices,n.position)){i.pointA=n.position,i.bodyB=e.body=o,i.pointB={x:n.position.x-o.position.x,y:n.position.y-o.position.y},i.angleB=o.angle,c.set(o,!1),u.trigger(e,"startdrag",{mouse:n,body:o});break}}}else i.bodyB=e.body=null,i.pointB=null,o&&u.trigger(e,"enddrag",{mouse:n,body:o})},o._triggerEvents=function(e){var t=e.mouse,n=t.sourceEvents;n.mousemove&&u.trigger(e,"mousemove",{mouse:t}),n.mousedown&&u.trigger(e,"mousedown",{mouse:t}),n.mouseup&&u.trigger(e,"mouseup",{mouse:t}),r.clearSourceEvents(t)}},function(e,t,n){var u={};e.exports=u;var d=n(2),a=n(14),l=n(1),p=n(11),c=n(3);u.collides=function(e,t){for(var n=[],i=0;i<t.length;i++){var o=t[i];if(l.overlaps(o.bounds,e.bounds))for(var r=1===o.parts.length?0:1;r<o.parts.length;r++){var s=o.parts[r];if(l.overlaps(s.bounds,e.bounds)){s=a.collides(s,e);if(s.collided){n.push(s);break}}}}return n},u.ray=function(e,t,n,i){i=i||1e-100;for(var o=d.angle(t,n),r=d.magnitude(d.sub(t,n)),s=.5*(n.x+t.x),t=.5*(n.y+t.y),o=p.rectangle(s,t,r,i,{angle:o}),a=u.collides(o,e),l=0;l<a.length;l+=1){var c=a[l];c.body=c.bodyB=c.bodyA}return a},u.region=function(e,t,n){for(var i=[],o=0;o<e.length;o++){var r=e[o],s=l.overlaps(r.bounds,t);(s&&!n||!s&&n)&&i.push(r)}return i},u.point=function(e,t){for(var n=[],i=0;i<e.length;i++){var o=e[i];if(l.contains(o.bounds,t))for(var r=1===o.parts.length?0:1;r<o.parts.length;r++){var s=o.parts[r];if(l.contains(s.bounds,t)&&c.contains(s.vertices,t)){n.push(o);break}}}return n}},function(e,t,n){var o={};e.exports=o;var i,r,s,a=n(4),l=n(18),c=n(0);"undefined"!=typeof window&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,s=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r||(r=function(e){i=setTimeout(function(){e(c.now())},1e3/60)},s=function(){clearTimeout(i)}),o.create=function(e){e=c.extend({fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},e);return e.delta=e.delta||1e3/e.fps,e.deltaMin=e.deltaMin||1e3/e.fps,e.deltaMax=e.deltaMax||1e3/(.5*e.fps),e.fps=1e3/e.delta,e},o.run=function(n,i){return void 0!==n.positionIterations&&(i=n,n=o.create()),function e(t){n.frameRequestId=r(e),t&&n.enabled&&o.tick(n,i,t)}(),n},o.tick=function(e,t,n){var i,o=t.timing,r=1,s={timestamp:o.timestamp};a.trigger(e,"beforeTick",s),e.isFixed?i=e.delta:(i=n-e.timePrev||e.delta,e.timePrev=n,e.deltaHistory.push(i),e.deltaHistory=e.deltaHistory.slice(-e.deltaSampleSize),r=(i=(i=(i=Math.min.apply(null,e.deltaHistory))<e.deltaMin?e.deltaMin:i)>e.deltaMax?e.deltaMax:i)/e.delta,e.delta=i),0!==e.timeScalePrev&&(r*=o.timeScale/e.timeScalePrev),0===o.timeScale&&(r=0),e.timeScalePrev=o.timeScale,e.correction=r,e.frameCounter+=1,1e3<=n-e.counterTimestamp&&(e.fps=e.frameCounter*((n-e.counterTimestamp)/1e3),e.counterTimestamp=n,e.frameCounter=0),a.trigger(e,"tick",s),a.trigger(e,"beforeUpdate",s),l.update(t,i,r),a.trigger(e,"afterUpdate",s),a.trigger(e,"afterTick",s)},o.stop=function(e){s(e.frameRequestId)},o.start=function(e,t){o.run(e,t)}},function(e,t,n){var h={};e.exports=h;n(1);var b=n(0);h.pathToVertices=function(e,t){"undefined"==typeof window||"SVGPathSeg"in window||b.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var n,i,o,r,s,a,l,c,u,d,p,f=[],v=0,m=0,y=0;t=t||15;function g(e,t,n){var i=n%2==1&&1<n;u&&e==u.x&&t==u.y||(p=u&&i?(d=u.x,u.y):d=0,n={x:d+e,y:p+t},!i&&u||(u=n),f.push(n),m=d+e,y=p+t)}function x(e){var t=e.pathSegTypeAsLetter.toUpperCase();if("Z"!==t){switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":m=e.x,y=e.y;break;case"H":m=e.x;break;case"V":y=e.y}g(m,y,e.pathSegType)}}for(h._svgPathToAbsolute(e),o=e.getTotalLength(),a=[],n=0;n<e.pathSegList.numberOfItems;n+=1)a.push(e.pathSegList.getItem(n));for(l=a.concat();v<o;){if((s=a[e.getPathSegAtLength(v)])!=c){for(;l.length&&l[0]!=s;)x(l.shift());c=s}switch(s.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":r=e.getPointAtLength(v),g(r.x,r.y,0)}v+=t}for(n=0,i=l.length;n<i;++n)x(l[n]);return f},h._svgPathToAbsolute=function(e){for(var t,n,i,o,r,s,a=e.pathSegList,l=0,c=0,u=a.numberOfItems,d=0;d<u;++d){var p=a.getItem(d),f=p.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(f))"x"in p&&(l=p.x),"y"in p&&(c=p.y);else switch("x1"in p&&(i=l+p.x1),"x2"in p&&(r=l+p.x2),"y1"in p&&(o=c+p.y1),"y2"in p&&(s=c+p.y2),"x"in p&&(l+=p.x),"y"in p&&(c+=p.y),f){case"m":a.replaceItem(e.createSVGPathSegMovetoAbs(l,c),d);break;case"l":a.replaceItem(e.createSVGPathSegLinetoAbs(l,c),d);break;case"h":a.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(l),d);break;case"v":a.replaceItem(e.createSVGPathSegLinetoVerticalAbs(c),d);break;case"c":a.replaceItem(e.createSVGPathSegCurvetoCubicAbs(l,c,i,o,r,s),d);break;case"s":a.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(l,c,r,s),d);break;case"q":a.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(l,c,i,o),d);break;case"t":a.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(l,c),d);break;case"a":a.replaceItem(e.createSVGPathSegArcAbs(l,c,p.r1,p.r2,p.angle,p.largeArcFlag,p.sweepFlag),d);break;case"z":case"Z":l=t,c=n}"M"!=f&&"m"!=f||(t=l,n=c)}}},function(e,t,n){var i={};e.exports=i;e=n(5),n(0);i.create=e.create,i.add=e.add,i.remove=e.remove,i.clear=e.clear,i.addComposite=e.addComposite,i.addBody=e.addBody,i.addConstraint=e.addConstraint}],o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=22);function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,i});